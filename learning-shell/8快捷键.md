# 快捷键

本小节将学习到的命令：

-   **clear**：清屏
-   **history**：显示的命令

## 命令行编辑

### 移动光标

| 快捷键               | 作用                      |
| :---------------- | :---------------------- |
| <kbd>Ctrl-a</kbd> | 光标移至行首                  |
| <kbd>Ctrl-e</kbd> | 光标移至行尾                  |
| <kbd>Ctrl-f</kbd> | 光标向前移动一个字符位置，与&lt;作用相同  |
| <kbd>Ctrl-b</kbd> | 光标向后移动一个字符位置，与>作用相同     |
| <kbd>Alt-f</kbd>  | 光标前移一个单词位置              |
| <kbd>Alt-b</kbd>  | 光标后移一个单词位置              |
| <kbd>Ctrl-l</kbd> | 清屏，并将光标移至左上角，与clear命令相同 |

### 修改文本

| 快捷键               | 作用                     |
| :---------------- | :--------------------- |
| <kbd>Ctrl-d</kbd> | 删除光标处字符                |
| <kbd>Ctrl-t</kbd> | 将光标处字符与前一个字符交换         |
| <kbd>Alt-t</kbd>  | 将光标所在单词与前一个单词交换        |
| <kbd>Alt-l</kbd>  | 将光标所在单词，从光标处到单词结尾转换成小写 |
| <kbd>Alt-u</kbd>  | 将光标所在单词，从光标处到单词结尾转换成大写 |

### 剪切粘贴

**下列所有剪切操作后的字符串，都可用于粘贴。**

| 快捷键                      | 作用                               |
| :----------------------- | :------------------------------- |
| <kbd>Ctrl-k</kbd>        | 剪切光标处到行末文本                       |
| <kbd>Ctrl-u</kbd>        | 剪切光标处到行首文本                       |
| <kbd>Alt-d</kbd>         | 剪切光标处到所处单词末尾的文本                  |
| <kbd>Alt-Backspace</kbd> | 剪切光标处到所处单词头部的文本；如果光标在头部，剪切上一个单词。 |
| <kbd>Ctrl+y</kbd>        | 粘贴                               |

## 自动补全

**使用<kbd>Tab</kbd>键，可实现自动补全。**

支持自动补全的特殊字符：

-   $：系统变量。
-   ~：用户名。
-   @：主机名。条件是行首为单词且以“@开头，且只支持/etc/hosts中所列主机名。

| 快捷键               | 作用                                 |
| :---------------- | :--------------------------------- |
| <kbd>Alt+?</kbd>  | 列出所有可能的补全结果。同按<kbd>Tab</kbd>2次效果相同 |
| <kbd>Alt-\*</kbd> | 插入所有可能的补全结果                        |

## 历史命令

命令输入历史都存储在.bash_history文件中。

### 搜索历史命令

使用命令history可搜索历史命令。

**结合less命令使用：**

```bash
me@ubuntu16.04:~$ history | less
...
```

历史命令的存储条数默认为2000（ubuntu16.04），可定制。

**查看使用过“/usr/bin”字段的命令：**

```bash
me@ubuntu16.04:~$ history | grep /usr/bin
...
88 ls -l /usr/bin > ls-output.txt
...
```

**“88”为该命令在历史列表中的排序，可使用“历史命令膨胀”功能执行该命令：**

```bash
me@ubuntu16.04:~$ !88
...
```

#### 交互式搜索历史命令

1.  <kbd>Ctrl-r</kbd>启动交互式搜索
2.  输入搜索内容
3.  <kbd>Enter</kbd>执行该命令，或<kbd>Ctrl-j</kbd>复制该命令。

<kbd>Ctrl-r</kbd>还可查看下一条结果，<kbd>Ctrl-g</kbd>或<kbd>Ctrl-c</kbd>退出交互式搜索。

**搜索顺序为从现在到以前。**

#### 快捷键

| 快捷键                 | 作用                         |
| :------------------ | :------------------------- |
| <kbd>Ctrl-p</kbd>   | 上一条历史，与<kbd>Up</kbd>作用相同   |
| <kbd>Ctrl-n</kbd>   | 上一条历史，与<kbd>Down</kbd>作用相同 |
| <kbd>Alt-></kbd>    | ?                          |
| <kbd>Alt-&lt;</kbd> | ?                          |
| <kbd>Ctrl-r</kbd>   | 交互式搜索                      |
| <kbd>Alt-p</kbd>    | ?                          |
| <kbd>Alt-n</kbd>    | ?                          |
| <kbd>Ctrl-o/kbd>    | ?                          |

### 历史命令膨胀

命令历史膨胀命令：

| 命令         | 作用                  |
| :--------- | :------------------ |
| !!         | 重复上一条命令             |
| !_number_  | 重复第_number_条命令      |
| !_string_  | 重复上一条以_string_开头的命令 |
| !?_string_ | 重复上一条包含_string_的命令  |
