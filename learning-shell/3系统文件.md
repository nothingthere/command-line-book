# 系统文件

-   **ls**： 列出文件夹内容
-   **file**：描述文件类型
-   **less**：读取文件内容

结合`ls`、`file`和`less`命令了解各系统文件作用。

## ls

**除了列出当前文件夹下的文件和子文件夹，还可制定执行的文件夹：**

```bash
me@ubuntu16.04:~$ ls /usr
bin games ....
```

列出“/usr”文件夹下的文件和子文件夹。

**还可列出多个文件夹下的文件和子文件夹。同时列出"~"和"/usr"文件夹下的文件和子文件夹：**

```bash
me@ubuntu16.04:~$ ls ~ /usr
/home/me:
Desktop    Downloads ...

/usr/:
bin  games ...
```

**获取更多文件信息：**

```bash
me@ubuntu16.04:~$ ls -l
total 52
drwxr-xr-x 16 me me 4096 8月  13 18:11 Desktop
drwxr-xr-x  3 me me 4096 8月  10 19:30 Documents
drwxr-xr-x 15 me me 4096 8月  12 14:30 Downloads
....
```

"-l"为"long"的缩写。

### 选项和参数

命令后通常会跟选项和参数，重置该命令默认行为：

```bash
command -options arguments
```

选项一般有缩写和全写两种形式。缩写时，多个选项可写在一起。

**"l"表示详细形式；“t”表示安装修改时间排序：**

```bash
me@ubuntu16.04:~$ ls -lt
...
```

**还可添加”--reverse”全写选项，反转排序结果：**

```bash
me@ubuntu16.04:~$ ls -lt --reverse
...
```

下表列出了“ls”命令常用的选项：

| 选项  | 全写               | 描述                                    |
| :-- | :--------------- | :------------------------------------ |
| -a  | --all            | 列出包含隐藏文件（以“.”开头）的所有文件                 |
| -A  | --almost-all     | 与“-a”选项唯一的不同是不列出“.”(当前文件夹)和“..”（父文件夹） |
| -d  | --directory      | 列出指定文件夹，和“-l”一起使用可列出指定文件夹的详细息         |
| -F  | --classify       | 如果为子文件夹，其后跟上“/”                       |
| -h  | --human-readable | 与“-l”选项一起使用时，文件大小单位可读性更强              |
| -l  |                  | 详细信息                                  |
| -r  | --reverse        | 反转显示顺序                                |
| -S  |                  | 按文件大小排序                               |
| -t  |                  | 按修改时间排序                               |

### 文件详细信息

**使用"-l"选项列出文件详细信息：**

```bash
me@ubuntu16.04:~$ ls -lh
drwxr-xr-x  4 me me 4.0K 8月  10 19:32 dwhelper
-rw-r--r--  1 me me 8.8K 8月  10 15:00 examples.desktop
```

各条信息其含义（以第一条为例，按出现顺序）：

-   drwxr-xr-x：第一个字符区分是文件还是文件夹，"d"表示文件夹，“-”表示文件；后3个字符表示所属用户读写权限；再后3个字符表示工作组成员读写权限？；最后3个字符表示其它用户读写权限。

-   4：硬链接数量。
-   me：文件所属者。
-   me：文件所属组？
-   4.0k：文件大小。
-   8月  10 19:32：修改时间。
-   dwhelper：文件名。

## 查看文件类型 file

**一切皆文件。**

```bash
me@ubuntu16.04:~/Pictures$ file P60715-183321.jpg
P60715-183321.jpg: JPEG image data, Exif standard: [TIFF image data, little-endian, direntries=18, GPS-Data, model=m2]
```

## 查看文件内容 less

**使用less查看文件内容：**

```bash
me@ubuntu16.04:~$ less /etc/passwd
...
```

可使用下列快捷键导航阅读：

| 快捷键                        | 作用           |
| :------------------------- | :----------- |
| <kbd>Page Up/b</kbd>       | 向上翻页         |
| <kbd>Page down/space</kbd> | 向下翻页         |
| <kbd>Up</kbd>              | 上一行          |
| <kbd>Down</kbd>            | 下一行          |
| <kbd>G</kbd>               | 跳转到文尾        |
| <kbd>1G/g</kbd>            | 跳转到文首        |
| /characters                | 搜索characters |
| n                          | 搜索上一个        |
| h                          | 显示帮助信息       |
| q                          | 退出           |

## 系统文件概览

-   /： 根目录，包含所有文件。
-   /bin：系统启动和运行时必须的文件。
-   /boot：含Linux内核、initial RAM disk image (for
    drivers needed at boot time)和启动加载器（boot loader）。
    比如：
    -   /boot/grub/grub.cfg：用于配置启动加载器。
    -   /boot/vmlinuz（名称可能不一）：Linux内核
-   /dev：所有设备（device）的列表。
-   /etc：包含所有应用于整个系统的配置文件，以及系统服务启动的shell脚本。所有文件都为纯文本文件。

    比如：

    -   /etc/crontab：automated jobs何时启动。
    -   /etc/fstab：储存设备及其挂载点。
    -   /etc/passwd：用户账号信息。

-   /home：普通用户文件操作区域。
-   /lib：包含系统核心程序公用库文件（与Window的DLL文件类似）。
-   /lost+found：系统崩溃后恢复使用。如果系统不出现严重错误，此文件夹为空。
-   /media：如USB和CD-ROM等移动设备的挂载点文件。
-   /mnt：老旧Linux系统中，该文件夹含手动挂载的移动设备文件。
-   /opt：主要用于保存商业软件。
-   /proc：其内容并不在硬盘中，只含内核的虚拟文件。其中文件可读，说明内核如何读取电脑信息。
-   /root：root用户的根目录。
-   /sbin：含超级用户执行重要系统任务所需二进制文件。
-   /tmp：含不同程序执行时创建的临时文件。通过配置，可实现系统重启时，不含任何内容。
-   /usr：最大的文件夹。含普通用户的所有程序和支持文件。
-   /usr/bin：不同Linux分支安装的执行文件。容量很多。
-   /usr/lib：含/usr/bin文件夹中的共享库文件。
-   /usr/local：不含Linux分支程序，而含整个系统使用程序？。通过源码编译安装的程序在/usr/local/bin文件夹中。系统安装后就有此文件夹，但当管理员安装某些程序后，此文件夹才有内容。

-   /usr/sbin：含其它管理员安装程序。
-   /usr/share：含与/usr/bin文件夹下的程序共享的所有数据，比如配置文件、图标、屏幕背景和声音文件等。
-   /usr/share/docs：绝大多数安装软件都有文档，就放置在其中。
-   /var：除/tmp和/home外，其它文件夹相对静态，改变不大。此文件夹主要存储更新频繁的数据，如数据库和用户邮件等。
-   /var/log：含日志文件，记录系统活动情况。其中最有用的是/var/log/message和（或）/var/log/syslog文件。出于安全考虑，需将其权限设置为超级用户。

## 软链接（Symbolic Links或Soft Links）

使用“ls”命令时，有时会出现类似如下的结果，其中“->”表示该文件有软链接：

```bash
lrwxrwxrwx 1 me me 11 2007-08-11 07:34 libc.so.6 -> libc-2.6.so
```

比如某个程序需共享“foo”文件，而此文件版本更新频繁，可在文件名后增添版本号。不过，如果此文件每次更新后，需需更改共享此文件程序的软件配置。

软链接的作用就在于，比如现在安装了2.6版本的“foo”，文件名为“foo-2.6”。此时就可创建一个软链接“foo”指向“foo-2.6”，读取“foo-2.6”文件时实质上是读取的“foo-2.6”文件。当更新至2.7版本时，重置此软链接即可。

### 硬链接

既然有软链接，也有硬链接，也可使文件有多个名字，不过机制不同，下章介绍。
